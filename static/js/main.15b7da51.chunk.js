(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(24)},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),l=a.n(c),s=(a(16),a(3)),o=a(2);a(17);function i(){const[e,t]=Object(n.useState)({username:"",password:""}),[a,c]=Object(n.useState)(""),l=e=>{t(t=>({...t,[e.target.name]:e.target.value}))};return r.a.createElement("div",{className:"login-container"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("https://pantrypal-backend-218e.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,passwordHash:e.password})});if(t.ok){const e=await t.json();localStorage.setItem("userId",e.userId),localStorage.setItem("username",e.username),c(e.message)}else{const e=await t.text();c(e)}}catch(a){console.error("Login failed:",a),c("An error occurred. Please try again.")}}},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:e.username,onChange:l,required:!0}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:e.password,onChange:l,required:!0}),r.a.createElement("button",{type:"submit"},"Login")),a&&r.a.createElement("p",{className:"login-message"},a))}a(18);function m(){const[e,t]=Object(n.useState)({username:"",email:"",password:""}),[a,c]=Object(n.useState)(""),l=e=>{t(t=>({...t,[e.target.name]:e.target.value}))};return r.a.createElement("div",{className:"signup-container"},r.a.createElement("h2",null,"Sign Up"),r.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("http://pantrypal-backend-218e.onrender.com/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,email:e.email,passwordHash:e.password})}),a=await t.text();c(a)}catch(a){console.error("Signup failed:",a),c("An error occurred. Please try again.")}}},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",value:e.username,onChange:l,required:!0}),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:e.email,onChange:l,required:!0}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:e.password,onChange:l,required:!0}),r.a.createElement("button",{type:"submit"},"Sign Up")),a&&r.a.createElement("p",{className:"signup-message"},a))}a(19);function p(){const[e,t]=Object(n.useState)([]),a=Object(o.p)();return Object(n.useEffect)(()=>{fetch("https://pantrypal-backend-218e.onrender.com/api/recipes").then(e=>e.json()).then(e=>t(e)).catch(e=>console.error("Failed to fetch recipes:",e))},[]),r.a.createElement("div",{className:"recipes-container"},r.a.createElement("h2",null,"All Recipes"),0===e.length?r.a.createElement("p",null,"No recipes found."):r.a.createElement("ul",{className:"recipe-list"},e.map(e=>r.a.createElement("li",{key:e.recipeId,className:"recipe-card",onClick:()=>a("/recipes/"+e.recipeId)},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,r.a.createElement("strong",null,"Created by:")," ",e.createdByUsername||"Unknown"),r.a.createElement("p",null,r.a.createElement("strong",null,"Created at:")," ",new Date(e.createdAt).toLocaleString())))))}a(20);function u(){var e;const{id:t}=Object(o.r)(),[a,c]=Object(n.useState)(null),[l,s]=Object(n.useState)(!1),[i,m]=Object(n.useState)(""),[p,u]=Object(n.useState)([]),[d,E]=Object(n.useState)(""),h=parseInt(localStorage.getItem("userId"));Object(n.useEffect)(()=>{fetch("https://pantrypal-backend-218e.onrender.com/api/recipes/"+t).then(e=>e.json()).then(e=>c(e)).catch(e=>console.error("Error fetching recipe:",e)),h&&fetch("https://pantrypal-backend-218e.onrender.com/api/saved/user/"+h).then(e=>e.json()).then(e=>{const a=e.some(e=>e.recipe.recipeId===parseInt(t));s(a)}).catch(e=>console.error("Error checking saved status:",e)),fetch("https://pantrypal-backend-218e.onrender.com/api/comments/recipe/"+t).then(e=>e.json()).then(e=>u(e)).catch(e=>console.error("Error fetching comments:",e))},[t,h]);return a?r.a.createElement("div",{className:"detail-container"},r.a.createElement("h2",null,a.title),r.a.createElement("p",null,r.a.createElement("strong",null,"Instructions:")),r.a.createElement("p",null,a.instructions),r.a.createElement("p",null,r.a.createElement("strong",null,"Created by:")," ",a.createdByUsername),r.a.createElement("p",{className:"timestamp"},r.a.createElement("strong",null,"Created at:")," ",new Date(a.createdAt).toLocaleString()),(null===(e=a.ingredients)||void 0===e?void 0:e.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"Ingredients:")),r.a.createElement("ul",null,a.ingredients.map((e,t)=>r.a.createElement("li",{key:t},e)))),h?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:async()=>{const e={userId:h,recipeId:parseInt(t)};try{const t=await fetch("https://pantrypal-backend-218e.onrender.com/api/saved",{method:l?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.text();m(a),s(!l)}catch(a){console.error("Save toggle failed:",a),m("Something went wrong.")}}},l?"Unsave Recipe":"Save Recipe"),r.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),!d.trim())return;const a={userId:h,recipeId:parseInt(t),content:d};try{const e=await fetch("https://pantrypal-backend-218e.onrender.com/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await e.text();m(n),E("");const r=await fetch("https://pantrypal-backend-218e.onrender.com/api/comments/recipe/"+t).then(e=>e.json());u(r)}catch(n){console.error("Comment submission failed:",n),m("Could not post comment.")}},className:"comment-form"},r.a.createElement("textarea",{value:d,onChange:e=>E(e.target.value),placeholder:"Write a comment...",rows:"3",required:!0}),r.a.createElement("button",{type:"submit"},"Post Comment"))):r.a.createElement("p",{style:{color:"red"}},"Log in to save and comment on this recipe."),i&&r.a.createElement("p",{className:"save-message"},i),r.a.createElement("div",{className:"comments-section"},r.a.createElement("h3",null,"Comments"),0===p.length?r.a.createElement("p",null,"No comments yet."):r.a.createElement("ul",{className:"comment-list"},p.map((e,t)=>r.a.createElement("li",{key:t},r.a.createElement("strong",null,e.user.username),": ",e.content))))):r.a.createElement("div",{className:"detail-container"},"Loading...")}a(21);function d(){const[e,t]=Object(n.useState)({title:"",instructions:""}),[a,c]=Object(n.useState)([]),[l,s]=Object(n.useState)(""),[o,i]=Object(n.useState)(""),m=e=>{t(t=>({...t,[e.target.name]:e.target.value}))};return r.a.createElement("div",{className:"create-recipe-container"},r.a.createElement("h2",null,"Create a Recipe"),r.a.createElement("form",{onSubmit:async n=>{n.preventDefault();const r=parseInt(localStorage.getItem("userId"));if(!r)return void i("Please log in to submit a recipe.");const l={...e,createdByUserId:r,ingredients:a};try{const e=await fetch("https://pantrypal-backend-218e.onrender.com/api/recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),a=await e.text();i(a),e.ok&&(t({title:"",instructions:""}),c([]))}catch(s){console.error("Error creating recipe:",s),i("Something went wrong.")}}},r.a.createElement("input",{type:"text",name:"title",placeholder:"Recipe Title",value:e.title,onChange:m,required:!0}),r.a.createElement("textarea",{name:"instructions",placeholder:"Instructions",value:e.instructions,onChange:m,required:!0}),r.a.createElement("div",{className:"ingredient-input-group"},r.a.createElement("input",{type:"text",placeholder:"Add ingredient",value:l,onChange:e=>s(e.target.value)}),r.a.createElement("button",{type:"button",onClick:()=>{const e=l.trim();e&&!a.includes(e)&&(c(t=>[...t,e]),s(""))}},"Add")),a.length>0&&r.a.createElement("ul",{className:"ingredient-list"},a.map((e,t)=>r.a.createElement("li",{key:t},e))),r.a.createElement("button",{type:"submit"},"Submit Recipe")),o&&r.a.createElement("p",{className:"create-recipe-message"},o))}a(22);function E(){const[e,t]=Object(n.useState)([]),a=parseInt(localStorage.getItem("userId"));return Object(n.useEffect)(()=>{a&&fetch("https://pantrypal-backend-218e.onrender.com/api/saved/user/"+a).then(e=>e.json()).then(e=>t(e)).catch(e=>console.error("Error fetching saved recipes:",e))},[a]),a?r.a.createElement("div",{className:"saved-recipes-container"},r.a.createElement("h2",null,"Saved Recipes"),0===e.length?r.a.createElement("p",null,"No saved recipes."):r.a.createElement("ul",{className:"saved-recipe-list"},e.map((e,t)=>{var a,n,c;return r.a.createElement(s.b,{key:t,to:"/recipes/"+e.recipe.recipeId,className:"saved-recipe-card-link"},r.a.createElement("li",{className:"saved-recipe-card"},r.a.createElement("h3",null,null===(a=e.recipe)||void 0===a?void 0:a.title),r.a.createElement("p",null,r.a.createElement("strong",null,"Created by:")," ",null===(n=e.recipe)||void 0===n||null===(c=n.createdBy)||void 0===c?void 0:c.username),r.a.createElement("p",null,r.a.createElement("strong",null,"Saved on:")," ",new Date(e.savedAt).toLocaleString())))}))):r.a.createElement("div",{className:"saved-recipes-container"},r.a.createElement("h2",null,"Saved Recipes"),r.a.createElement("p",null,"Please log in to view your saved recipes."))}a(23);function h(){const e=Object(o.n)();return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-logo"},"PantryPal"),r.a.createElement("div",{className:"navbar-links"},r.a.createElement(s.b,{to:"/",className:"/"===e.pathname?"active":""},"All Recipes"),r.a.createElement(s.b,{to:"/create",className:"/create"===e.pathname?"active":""},"Create"),r.a.createElement(s.b,{to:"/saved",className:"/saved"===e.pathname?"active":""},"Saved"),r.a.createElement(s.b,{to:"/signup",className:"/signup"===e.pathname?"active":""},"Sign Up"),r.a.createElement(s.b,{to:"/login",className:"/login"===e.pathname?"active":""},"Login")))}var g=function(){return r.a.createElement(s.a,null,r.a.createElement(h,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",element:r.a.createElement(p,null)}),r.a.createElement(o.a,{path:"/login",element:r.a.createElement(i,null)}),r.a.createElement(o.a,{path:"/signup",element:r.a.createElement(m,null)}),r.a.createElement(o.a,{path:"/recipes/:id",element:r.a.createElement(u,null)}),r.a.createElement(o.a,{path:"/create",element:r.a.createElement(d,null)}),r.a.createElement(o.a,{path:"/saved",element:r.a.createElement(E,null)})))};var v=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,25)).then(t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:c,getTTFB:l}=t;a(e),n(e),r(e),c(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null))),v()}],[[8,1,2]]]);
//# sourceMappingURL=main.15b7da51.chunk.js.map